<mat-card class="Header1" style="background-color:  rgb(240, 240, 240); z-index: 9999;">
  <div class="head">
    <div class="btnFechar">
      <div class="btnteste">
      <button mat-icon-button class="close-button" (click)="closeDialog()" id="fecha">
          <mat-icon class="close-icon" color="warn">close</mat-icon>
      </button>  
      </div>
  </div>
  <h2 mat-dialog-title><span class="titulo">{{tituloacaco}}</span></h2>
  </div>
</mat-card>



<form [formGroup]="cadastro"  (ngSubmit)="Cadastrar()">           
    
    <mat-card  class="cardsDialog">    

           <mat-card-content >   
                  <div class="contacto"> 
                    <mat-form-field  appearance="outline" class="example-full-width" style="width: 30%;" >                                   
                        <mat-label>Referencia</mat-label>
                        <input type="text" matInput  formControlName="codigo">
                        <!-- [matAutocomplete]="filteredOptionsTipoDocs" [formControl]="myControlTipoDoc"
                        <mat-autocomplete #filteredOptionsTipoDocs="matAutocomplete" 
                         >                   
                          <mat-option  *ngFor="let item of filteredOptionsTipoDoc | 
                          async; let index = index" [value]="item.descricao" (onSelectionChange)="OnSelecttipodo(item)">
                              {{ item.descricao | titlecase}}
                            </mat-option>
        
                        </mat-autocomplete> -->
                      </mat-form-field>

                         <mat-form-field  appearance="outline" class="example-full-width" >                                   
                                <mat-label> Descrição</mat-label>
                                <input type="text" matInput  formControlName="descricao">                    
                              </mat-form-field>

                             
                            
                          </div>
  


                          <div class="contacto" style="width: 50%;">                            
                            <mat-form-field  appearance="outline" class="example-full-width" >                                   
                                <mat-label> Ano/Semestre</mat-label>
                                <input type="text" matInput formControlName="anosem" >
                                 <!-- [matAutocomplete]="filteredOptionsTipoDocs" [formControl]="myControlTipoDoc"
                                <mat-autocomplete #filteredOptionsTipoDocs="matAutocomplete" 
                                 >                   
                                  <mat-option  *ngFor="let item of filteredOptionsTipoDoc | 
                                  async; let index = index" [value]="item.descricao" (onSelectionChange)="OnSelecttipodo(item)">
                                      {{ item.descricao | titlecase}}
                                    </mat-option>
                
                                </mat-autocomplete> -->
                              </mat-form-field>


                              <mat-checkbox class="example-margin">Fechado</mat-checkbox>
                           </div>

                           <div class="Container">
                
                            <div class="contenerFilho">
                                <div class="titulo123">
                                    <h4>Periodo da etapa </h4>
                                   </div> 
                          <div class="contacto">   
                                                   
                                      <mat-form-field  appearance="outline" class="example-full-width">
                                        <mat-label> Inicio</mat-label>
                                        <input matInput autocomplete="off" formControlName="data" 
                                        [matDatepicker]="datamat"
                                            readonly>
                                        <mat-datepicker-toggle matSuffix [for]="datamat">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #datamat></mat-datepicker>
                                    </mat-form-field>
                        
                                    <mat-form-field  appearance="outline" class="example-full-width">
                                        <mat-label>Fim</mat-label>
                                        <input matInput autocomplete="off" formControlName="data" 
                                        [matDatepicker]="datamat"
                                            readonly>
                                        <mat-datepicker-toggle matSuffix [for]="datamat">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #datamat></mat-datepicker>
                                    </mat-form-field>
                          </div>
                              </div>
                            <div class="contenerFilho">
                                <div class="titulo123">
                                  <h4>Prazo de envio de aulas e frequências </h4>
                                 </div> 
                               <div class="contacto">                            
                                 
                                    <mat-form-field  appearance="outline" class="example-full-width">
                                      <mat-label> Inicio</mat-label>
                                      <input matInput autocomplete="off" formControlName="data" 
                                      [matDatepicker]="datamat"
                                          readonly>
                                      <mat-datepicker-toggle matSuffix [for]="datamat">
                                      </mat-datepicker-toggle>
                                      <mat-datepicker #datamat></mat-datepicker>
                                  </mat-form-field>
              
                                  <mat-form-field  appearance="outline" class="example-full-width">
                                      <mat-label>Fim</mat-label>
                                      <input matInput autocomplete="off" formControlName="data" 
                                      [matDatepicker]="datamat"
                                          readonly>
                                      <mat-datepicker-toggle matSuffix [for]="datamat">
                                      </mat-datepicker-toggle>
                                      <mat-datepicker #datamat></mat-datepicker>
                                  </mat-form-field>
                                  </div>
                           </div>
              
                              </div>
                              <div class="Container"> 
                    <div class="contenerFilho">
                           <div class="titulo123">
                            <h4>Prazo de envio de avaliações e notas </h4>
                           </div> 
                            <div class="contacto">                            
                           

                            <mat-form-field  appearance="outline" class="example-full-width" style="display: none;">
                                <mat-label>Ano/Semestre </mat-label>
                                 <input matInput  formControlName="nome" class="inputpesquisa" [readonly]="true"/>
                                <button matSuffix mat-raised-button  style="display: flex; margin-right: 1rem; box-shadow: 0 4px 8px #8d8d8d;"
                                (click)="getestudante()" class="btnpesquisa" type="button" >
                                    <mat-icon class='search-icon' matSuffix>search</mat-icon>                              
                                </button>
                              </mat-form-field>

                              
                              <mat-form-field  appearance="outline" class="example-full-width">
                                <mat-label> Inicio</mat-label>
                                <input matInput autocomplete="off" formControlName="data" 
                                [matDatepicker]="datamat"
                                    readonly>
                                <mat-datepicker-toggle matSuffix [for]="datamat">
                                </mat-datepicker-toggle>
                                <mat-datepicker #datamat></mat-datepicker>
                            </mat-form-field>

                            <mat-form-field  appearance="outline" class="example-full-width">
                                <mat-label>Fim</mat-label>
                                <input matInput autocomplete="off" formControlName="data" 
                                [matDatepicker]="datamat"
                                    readonly>
                                <mat-datepicker-toggle matSuffix [for]="datamat">
                                </mat-datepicker-toggle>
                                <mat-datepicker #datamat></mat-datepicker>
                            </mat-form-field>
                              </div>
                     </div>

                     <div class="contenerFilho">
                        <div class="titulo123">
                            <h4>Prazo de liberação de resultados </h4>
                           </div> 
                           <div class="contacto">                            

                            <mat-form-field  appearance="outline" class="example-full-width">
                                <mat-label>Data</mat-label>
                                <input matInput autocomplete="off" formControlName="data" 
                                [matDatepicker]="datamat"
                                    readonly>
                                <mat-datepicker-toggle matSuffix [for]="datamat">
                                </mat-datepicker-toggle>
                                <mat-datepicker #datamat></mat-datepicker>
                            </mat-form-field>
                              </div>
                        </div>
                        </div>

          


           </mat-card-content>
         </mat-card>
       
       
       
 
       

                 
              
   
                   <mat-card class="cardsDialog" style="margin-top: 2rem;">
                     <mat-card-content>
                       <mat-tab-group>
                         <mat-tab label="Turmas associadas"> 
                          
                         <mat-card  style="margin-top: 2rem;width: 100%;">
                           
                       
                              <mat-card-content >   
                                     
                               <!-- <div class=".btnPrint" style="margin-bottom: 1rem;" >
                         <button matSuffix mat-raised-button 
                         (click)="Getturmas()" type="button" style="width: 15%; margin-bottom: 1rem;">
                             <mat-icon class='search-icon'  matSuffix>refresh</mat-icon>  
                             <span>Dados</span>                            
                         </button>
                       </div> -->

                       <div class="btnPrint" style="width: 15%; margin-bottom: 1rem;  ">
                         <button (click)="Getturmas()" type="button">
                           <mat-icon style="color: rgb(20, 116, 68);">refresh</mat-icon>
                           <span>Adicionar Turmas</span>  
                           </button>
                        </div>
                                     
                         <div class="mat-elevation-z2">     
                           <div class="body table-responsive">                                               
                              <table mat-table [dataSource]="dataListaturma">          
                               <ng-container matColumnDef="nrdoc">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Número </th>
                                 <td mat-cell *matCellDef="let element"> {{element.nrdoc}}</td>
                                 <td mat-footer-cell *matFooterCellDef>  </td>
                               </ng-container>

                               <ng-container matColumnDef="descricao">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Documento </th>
                                 <td mat-cell *matCellDef="let element"> {{element.descricao
                                 }} </td>
                                 <td mat-footer-cell *matFooterCellDef>  </td>
                               </ng-container>  
                               <ng-container matColumnDef="data">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Data </th>
                                 <td mat-cell *matCellDef="let element"> {{element.data 
                                  | date:'dd-MM-yyyy'}} </td>
                                 <td mat-footer-cell *matFooterCellDef >Totais: </td>
                               </ng-container>
                               <ng-container matColumnDef="valordoc">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Valor doc.  </th>
                                 <td mat-cell *matCellDef="let element"> {{element.valordoc}} </td>
                                 <td mat-footer-cell *matFooterCellDef> {{calculationtotaldoc() }}  {{moeda}}  </td>
                               </ng-container>
                               <ng-container matColumnDef="valorpreg">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Por Pagar </th>
                                 <td mat-cell *matCellDef="let element"> {{element.valorpreg}} </td>
                                 <td mat-footer-cell *matFooterCellDef> {{calculationtotalpreg() }}  {{moeda}}  </td>
                               </ng-container>

                               <ng-container matColumnDef="valorreg">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pago </th>
                                 <td mat-cell *matCellDef="let element"> {{element.valorreg}} </td>
                                 <td mat-footer-cell *matFooterCellDef>{{calculationtotalpago()}} {{moeda}}</td>
                  
                               </ng-container>

                               <ng-container matColumnDef="desconto">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Desconto </th>
                                 <td mat-cell *matCellDef="let element"> {{element.descontofin}} </td>
                                 <td mat-footer-cell *matFooterCellDef>  {{calculationtotaldesc() }}  {{moeda}} </td>
                  
                               </ng-container>

                               <ng-container matColumnDef="valorpend">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pendente </th>
                                 <td mat-cell *matCellDef="let element"> {{element.valorPend}} </td>
                                 <td mat-footer-cell *matFooterCellDef>  {{calculationtotalpendente() }}  {{moeda}} </td>
                  
                               </ng-container>
                               <ng-container matColumnDef="marcar">
                                 <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);">  <mat-icon>delete_sweep</mat-icon> </th>
                                 <td mat-cell *matCellDef="let i = index">
                                   
                                 
               <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
               (click)="removerturmal(i)"  style="cursor: pointer;
               " > <mat-icon>delete_sweep</mat-icon></button></td>
                    <td mat-footer-cell *matFooterCellDef>  </td>
                               </ng-container>

                             
                               <!-- 
                                  <tr mat-footer-row *matFooterRowDef="['totalpago']" class="example-second-footer-row"></tr>
                             
                                 <tr mat-footer-row *matFooterRowDef="['totadescon']" class="example-second-footer-row"></tr>
                               <tr mat-footer-row *matFooterRowDef="['totapende']" class="example-second-footer-row"></tr>
                  -->



                                <tr mat-header-row *matHeaderRowDef="colunas"></tr>
                                <tr mat-row *matRowDef="let row; columns: colunas;"></tr>
                                
   <tr mat-footer-row *matFooterRowDef="colunas; sticky: true"></tr>
                              </table>                          
                              <mat-paginator 
                              [length]="totalrecordturma"
                              [pageSize]="5"
                              [pageSizeOptions]="[5, 8, 10,20, 50]" 
                               showFirstLastButtons> </mat-paginator>

                               </div>
                            </div> 
                      
                                    
                                  
                                     
                              </mat-card-content>
                            </mat-card>
                       
                       
                         </mat-tab>
                         
                        
 >
                       </mat-tab-group>
                     </mat-card-content>
                   </mat-card>
                       
                     
                    
                  

        

     
   
   
       <div  style="display: flex; width: 100%; justify-content: center; margin-top: 1rem;">
         

           </div>
   
 </form>

 <div  class="spinner-wrapper" *ngIf="isSpinnerDisplayed">
   <mat-spinner></mat-spinner>
 </div> 

 
<mat-dialog-actions class="dialogaction" style="z-index: 9999;"> 

  


  <button (click)="Cadastrar()" class="Save">
    <mat-icon>save</mat-icon>

    <span class="texto">
      {{botaoacao}}
    </span>

  </button>
  
  </mat-dialog-actions>
  