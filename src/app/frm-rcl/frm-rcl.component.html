

 <form [formGroup]="cadastro"  (ngSubmit)="Cadastrar()">

  <mat-card  class="cardsDialog">

         <mat-card-content >
                <div class="contacto">
                       <mat-form-field  appearance="outline" class="example-full-width" >
                              <mat-label>Tipo de Documento</mat-label>
                              <input type="text" matInput
                               [matAutocomplete]="filteredOptionsTipoDocs" [formControl]="myControlTipoDoc">
                              <mat-autocomplete #filteredOptionsTipoDocs="matAutocomplete"
                               >
                                <mat-option  *ngFor="let item of filteredOptionsTipoDoc |
                                async; let index = index" [value]="item.descricao" (onSelectionChange)="OnSelecttipodo(item)">
                                    {{ item.descricao | titlecase}}
                                  </mat-option>

                              </mat-autocomplete>
                            </mat-form-field>

                            <!-- <div class="btnPrint" style="width: 20%; margin-right: .5rem; display: none;">
                              <button   (click)="carregarRCL()" type="button" >
                                <mat-icon style="color: rgb(2, 57, 14);"> search</mat-icon>
                                <span> Busca </span>
                                </button>
                             </div> -->


                            <div class="group">
                             <div class="btnPrint" style="gap: 1rem;">
                              <!-- <button type="button"   (click)="novo()">
                                <mat-icon style="color: rgb(0, 68, 0);">refresh</mat-icon>
                                <span>Novo</span></button> -->
                               <button type="button"   (click)="Imprimir()">
                                 <mat-icon >print</mat-icon>
                                 <span>Imprimir</span></button>
                              </div>

                       
                              <div class="btnPrint">
                               <button   [disabled]="cadastro.invalid"  >
                                 <mat-icon style="color: rgb(222, 161, 6);">save</mat-icon>
                                 <span> {{botaoAccao}} </span>
                                 </button>
                              </div>

                            </div>

                        </div>



                <div class="contacto">
                            <!-- <mat-form-field  appearance="outline" class="example-full-width">
                              <mat-label>Nº do Recibo</mat-label>
                              <input matInput type="number" formControlName="numero" [readonly]="true">
                            </mat-form-field> -->


                          <mat-form-field  appearance="outline" class="example-full-width">
                              <mat-label>Nome do aluno </mat-label>
                               <input matInput  formControlName="nome" class="inputpesquisa" [readonly]="true"/>
                              <button matSuffix mat-raised-button  style="display: flex; margin-right: 1rem; box-shadow: 0 4px 8px #8d8d8d;"
                              (click)="getestudante()" class="btnpesquisa" type="button" >
                                  <mat-icon class='search-icon' matSuffix>search</mat-icon>
                              </button>
                            </mat-form-field>


                            <mat-form-field  appearance="outline" class="example-full-width">
                              <mat-label>Data de emissão</mat-label>
                              <input matInput autocomplete="off" formControlName="data"
                              [matDatepicker]="datamat"
                                  readonly>
                              <mat-datepicker-toggle matSuffix [for]="datamat">
                              </mat-datepicker-toggle>
                              <mat-datepicker #datamat></mat-datepicker>
                          </mat-form-field>
                </div>
                <div class="contacto">
                 <mat-form-field   appearance="outline" class="example-full-width">
                   <mat-label>Centro de Custo</mat-label>
                   <input matInput type="text" formControlName="ccusto" [readonly]="true">
                 </mat-form-field>
                 <mat-form-field  appearance="outline" class="example-full-width">
                   <mat-label>Morada</mat-label>
                   <input matInput type="text" formControlName="morada" [readonly]="true">
                 </mat-form-field>

                </div>
               <div class="contacto">
                 <mat-form-field   appearance="outline" class="example-full-width">
                 <mat-label>Localidade</mat-label>
                 <input matInput type="text" formControlName="localidade" [readonly]="true">
               </mat-form-field>

               <mat-form-field   appearance="outline" class="example-full-width">
                 <mat-label>NUIT</mat-label>
                 <input matInput type="number" formControlName="nuit" [readonly]="true">
               </mat-form-field></div>
         </mat-card-content>
       </mat-card>








                 <mat-card class="cardsDialog" style="margin-top: 2rem;">
                   <mat-card-content>
                     <mat-tab-group>
                       <mat-tab label="Documentos">

                


                   


                         

                      <div  style="width: 100%; margin-bottom: 1rem;  display: flex; gap: 1rem; justify-content: flex-end; " >


                         <!-- <div *ngIf="visibilidadeRclAdiant;then content else other_content">
                         </div> -->
                         <!-- <ng-template #content> -->
                          <div class="linhasrcl" *ngIf="visiblelinhas" style="width: 20%; display: flex;justify-content: flex-end;">
                            <button type="button" mat-mini-fab (click)="adicionarRcl()"
                            style="background-color: rgb(2, 43, 72); color: white;">
                            <mat-icon>plus_one</mat-icon>
                        </button>
                          </div>
                     
                       <div class=".btnPrint" style="margin-bottom: 1rem; width: 20%; color: rgb(0, 44, 4);"  *ngIf="visibletable">
                        <button matSuffix mat-raised-button
                        (click)="Getturmas()" type="button" style="width: 100%; ">
                            <mat-icon class='search-icon'  matSuffix style="color:rgb(0, 44, 15);">refresh</mat-icon>
                            <span style="color:rgb(0, 44, 4);">Contas</span>
                        </button>
                      </div>


                       <!-- </ng-template> -->
                         <!-- <ng-template #other_content>
                           <div style="display: flex;justify-content: end;" class="btnPrint">


                         <button (click)="Getturmas()" type="button">
                           <mat-icon style="color: rgb(20, 116, 68);">refresh</mat-icon>
                           <span>Dados</span>
                           </button>
                           </div>

                     </ng-template> -->


                      </div>

                      <div *ngIf="visibilidadeRclAdiant;then content else other_content">
                     </div>
                     <ng-template #content>




<div formArrayName="rcll" class="agrega" >

 <table>
   <thead>
     <tr>
       <th style="height: 2rem;">Nº Doc</th>
       <th>Documento</th>
       <th>Valor Doc</th>
       <th>Por Pagar</th>
       <th>Pago</th>
       <th>Desconto</th>
       <th>Pendente </th>
       <th> ... </th>

     </tr>
   </thead>


   <tbody *ngFor="let item of getrcll.controls; let i = index" [formGroupName]="i">

     <tr>
       <td>


             <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>Numero doc</mat-label>
                    <input matInput type="text" formControlName="nrdoc" >
                  </mat-form-field>

       </td>
                <td >


             <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>Documento</mat-label>
                    <input matInput type="text" autocomplete="off"  formControlName="descricao" >
                  </mat-form-field>


                </td>
               
                <td>
                 <mat-form-field appearance="outline" class="example-full-width">
                  <mat-label>Valor Doc</mat-label>
                   <input matInput type="number"  (input)="onKeyPress($event,i)" formControlName="valordoc"  >
                 </mat-form-field>
               </td>
               <td>
                 <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Por pagar</mat-label>
                   <input matInput type="number" (input)="onKeyPress($event,i)" formControlName="valorpreg">
                 </mat-form-field>
               </td>

               <td>
                 <mat-form-field appearance="outline" class="example-full-width">
                  <mat-label>Pago</mat-label>
                   <input matInput type="number"  (input)="onKeyPress($event,i)" formControlName="valorreg">
                 </mat-form-field>
               </td>

               <td>
                 <mat-form-field appearance="outline" class="example-full-width">
                  <mat-label>Desconto</mat-label>
                   <input matInput type="number"   formControlName="descontofin">
                 </mat-form-field>
               </td>
               <td>
                 <mat-form-field appearance="outline" class="example-full-width">
                   <mat-label>Pendente</mat-label>
                   <input matInput type="number"  formControlName="valorPend" >
                 </mat-form-field>
               </td>
               <td>

                 <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
                 (click)="removerturmal(i)"  style="cursor: pointer;
                 " > <mat-icon>delete_sweep</mat-icon></button>
               </td>

     </tr>
   </tbody>
 </table>
</div>



                   </ng-template>
                     <ng-template #other_content>

                       <div class="mat-elevation-z2">
                         <div class="body table-responsive">
                            <table mat-table [dataSource]="dataListaturma">
                              
                             <ng-container matColumnDef="nrdoc">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Número </th>
                               <td mat-cell *matCellDef="let element"> {{element.nrdoc}}</td>
                               <td mat-footer-cell *matFooterCellDef>  </td>
                             </ng-container>

                             <ng-container matColumnDef="descricao">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Documento </th>
                               <td mat-cell *matCellDef="let element"> {{element.descricao
                               }} </td>
                               <td mat-footer-cell *matFooterCellDef>  </td>
                             </ng-container>
                             <ng-container matColumnDef="data">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Data </th>
                               <td mat-cell *matCellDef="let element"> {{element.data
                                | date:'dd-MM-yyyy'}} </td>
                               <td mat-footer-cell *matFooterCellDef >Totais: </td>
                             </ng-container>
                             <ng-container matColumnDef="valordoc">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Valor doc.  </th>
                               <td mat-cell *matCellDef="let element"> {{element.valordoc}} </td>
                               <td mat-footer-cell *matFooterCellDef> {{calculationtotaldoc() }}  {{moeda}}  </td>
                             </ng-container>
                             <ng-container matColumnDef="valorpreg">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Por Pagar </th>
                               <td mat-cell *matCellDef="let element"> {{element.valorpreg}} </td>
                               <td mat-footer-cell *matFooterCellDef> {{calculationtotalpreg() }}  {{moeda}}  </td>
                             </ng-container>

                             <ng-container matColumnDef="valorreg">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pago </th>
                               <td mat-cell *matCellDef="let element"> {{element.valorreg}} </td>
                               <td mat-footer-cell *matFooterCellDef>{{calculationtotalpago()}} {{moeda}}</td>

                             </ng-container>

                             <ng-container matColumnDef="desconto">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Desconto </th>
                               <td mat-cell *matCellDef="let element"> {{element.descontofin}} </td>
                               <td mat-footer-cell *matFooterCellDef>  {{calculationtotaldesc() }}  {{moeda}} </td>

                             </ng-container>

                             <ng-container matColumnDef="valorpend">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pendente </th>
                               <td mat-cell *matCellDef="let element"> {{element.valorPend}} </td>
                               <td mat-footer-cell *matFooterCellDef>  {{calculationtotalpendente() }}  {{moeda}} </td>

                             </ng-container>
                             <ng-container matColumnDef="marcar">
                               <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);">  <mat-icon>delete_sweep</mat-icon> </th>
                               <td mat-cell *matCellDef="let i = index">


             <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
             (click)="removerturmal(i)"  style="cursor: pointer;
             " > <mat-icon>delete_sweep</mat-icon></button></td>
                  <td mat-footer-cell *matFooterCellDef>  </td>
                             </ng-container> 


                             <!--
                                <tr mat-footer-row *matFooterRowDef="['totalpago']" class="example-second-footer-row"></tr>

                               <tr mat-footer-row *matFooterRowDef="['totadescon']" class="example-second-footer-row"></tr>
                             <tr mat-footer-row *matFooterRowDef="['totapende']" class="example-second-footer-row"></tr>
                -->



                               <tr mat-header-row *matHeaderRowDef="colunas"></tr>
                              <tr mat-row *matRowDef="let row; columns: colunas;"></tr>

 <tr mat-footer-row *matFooterRowDef="colunas; sticky: true"></tr>
                            </table>
                            <mat-paginator
                            [length]="totalrecordturma"
                            [pageSize]="5"
                            [pageSizeOptions]="[5, 8, 10,20, 50]"
                             showFirstLastButtons> </mat-paginator>

                             </div>
                          </div>

                 </ng-template>






                          
                      


                       </mat-tab>


<mat-tab label="Outros dados">

<mat-tab-group>
 <mat-tab label="Regularizações">


 <div formArrayName="formasp" class="agrega">

   <div *ngIf="visibilidadeagregado; else loggedOut">
     <table>
       <thead>
         <tr>
           <th>Tipo Movimento</th>
           <th>Nº de cheque</th>
           <th>Conta</th>
           <th>Data</th>
           <th>Valor</th>
           <th>
                <button type="button"
               style="background-color: rgb(2, 43, 72); color: white;" (click)="adicionarFp()">
               <mat-icon>plus_one</mat-icon>
           </button>

             </th>

         </tr>
       </thead>


       <tbody *ngFor="let item of itemsFp.controls; let i = index" [formGroupName]="i">
         <tr>
           <td>
             <mat-form-field  appearance="outline" class="example-full-width">
               <mat-label>Tipo de Movimento</mat-label>
               <input type="text" matInput
               formControlName="titulo"
               [matAutocomplete]="autobi"  [formControl]="myControlturno">
              <mat-autocomplete #autobi="matAutocomplete"
              >
                  <mat-option (click)="onSelectbi(item,i)" *ngFor="let item of filteredOptionsturno |
                  async; let index = index" [value]="item.descricao">
                      {{ item.descricao | titlecase}}
                    </mat-option>
              </mat-autocomplete>
           </mat-form-field>

           </td>
           <td >
             <mat-form-field  appearance="outline" class="example-full-width">
               <mat-label>Nº de cheque</mat-label>
                    <input matInput type="text" formControlName="numtitulo">
                  </mat-form-field>
                </td>

                <td>
                 <mat-form-field  appearance="outline" class="example-full-width">
                   <mat-label>Conta</mat-label>
                   <input type="text" matInput
                   formControlName="contatesoura"
                   [matAutocomplete]="autobissssssssss">
                  <mat-autocomplete #autobissssssssss="matAutocomplete"
                  >
                      <mat-option (click)="onSetEtapaSemestre(item,i)" *ngFor="let item of
                      filteredOptionsEtapaSemestre |
                      async; let index = index" [value]="item.contas">
                          {{ item.contas | titlecase}}
                        </mat-option>
                  </mat-autocomplete>
               </mat-form-field>
               </td>
               <td>
                 <mat-form-field  appearance="outline" class="example-full-width">
                   <mat-label>Data</mat-label>
                   <input matInput [matDatepicker]="picker1" formControlName="dcheque">
                   <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                   <mat-datepicker #picker1></mat-datepicker>
                 </mat-form-field>
               </td>
             <td>
               <mat-form-field  appearance="outline" class="example-full-width">
                 <mat-label>Valor</mat-label>
                 <input matInput type="number"  formControlName="valor">
               </mat-form-field>
             </td>
           <td>

             <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
             (click)="removerFormasp(i)"  style="cursor: pointer;
             " > <mat-icon>delete_sweep</mat-icon></button>
           </td>

         </tr>
       </tbody>
     </table>

   </div>

   <ng-template #loggedOut>
     <div style="display: flex;justify-content: end;">
       <button type="button" mat-mini-fab (click)="adicionarFp()"
       style="background-color: rgb(2, 43, 72); color: white;">
       <mat-icon>plus_one</mat-icon>
   </button>
     </div>
   </ng-template>
 </div>


 </mat-tab>
 <mat-tab label="Outros dados">

  <div class="contacto">
   <mat-form-field  appearance="outline" class="example-full-width">
     <mat-label>Curso</mat-label>
     <input matInput type="text" formControlName="desccurso" [readonly]="true">
   </mat-form-field>

        <mat-form-field  appearance="outline" class="example-full-width">
          <mat-label>Nível académico</mat-label>
          <input matInput type="text" formControlName="nivelac" [readonly]="true">
        </mat-form-field>
        <mat-form-field  appearance="outline" class="example-full-width">
          <mat-label>Ano/Semstre turma</mat-label>
          <input matInput type="text" formControlName="anosem" [readonly]="true">
        </mat-form-field>





</div>
 </mat-tab>
</mat-tab-group>


 </mat-tab>
                     </mat-tab-group>
                   </mat-card-content>
                 </mat-card>



     <div  style="display: flex; width: 100%; justify-content: center; margin-top: 1rem;">


         </div>

</form>

<div  class="spinner-wrapper" *ngIf="isSpinnerDisplayed">
 <mat-spinner></mat-spinner>
</div>














































<!-- ----------------------------------------------------------------------------------------------------------------------------------------------- -->
<!--  
<div class="Cabecalho">
  <h1>Recibo</h1>
</div>


<form [formGroup]="cadastro"  (ngSubmit)="Cadastrar()">           
    
       <mat-card  class="cardsDialog">    

              <mat-card-content >   
                     <div class="contacto"> 
                            <mat-form-field  appearance="outline" class="example-full-width" >                                   
                                   <mat-label>Tipo de Documento</mat-label>
                                   <input type="text" matInput 
                                    [matAutocomplete]="filteredOptionsTipoDocs" [formControl]="myControlTipoDoc">
                                   <mat-autocomplete #filteredOptionsTipoDocs="matAutocomplete" 
                                    >                   
                                     <mat-option  *ngFor="let item of filteredOptionsTipoDoc | 
                                     async; let index = index" [value]="item.descricao" (onSelectionChange)="OnSelecttipodo(item)">
                                         {{ item.descricao | titlecase}}
                                       </mat-option>
                   
                                   </mat-autocomplete>
                                 </mat-form-field>

                                 <div class="group">
                                  <div class="btnPrint">
                                    <button type="button"   (click)="Imprimir()">
                                      <mat-icon >print</mat-icon>
                                      <span>Imprimir</span></button>
                                   </div>
  
                                   <div class="btnPrint">
                                    <button   [disabled]="cadastro.invalid"  >
                                      <mat-icon style="color: rgb(222, 161, 6);">save</mat-icon>
                                      <span> {{botaoAccao}} </span>
                                      </button>
                                   </div>

                                 </div>
                               
                             </div>


                             
                     <div class="contacto">                            
                                 <mat-form-field  appearance="outline" class="example-full-width">
                                   <mat-label>Nº do Recibo</mat-label>
                                   <input matInput type="number" formControlName="numero" [readonly]="true">
                                 </mat-form-field>
           

                               <mat-form-field  appearance="outline" class="example-full-width">
                                   <mat-label>Nome do aluno </mat-label>
                                    <input matInput  formControlName="nome" class="inputpesquisa" [readonly]="true"/>
                                   <button matSuffix mat-raised-button  style="display: flex; margin-right: 1rem; box-shadow: 0 4px 8px #8d8d8d;"
                                   (click)="getestudante()" class="btnpesquisa" type="button" >
                                       <mat-icon class='search-icon' matSuffix>search</mat-icon>                              
                                   </button>
                                 </mat-form-field>

                                 
                                 <mat-form-field  appearance="outline" class="example-full-width">
                                   <mat-label>Data de emissão</mat-label>
                                   <input matInput autocomplete="off" formControlName="data" 
                                   [matDatepicker]="datamat"
                                       readonly>
                                   <mat-datepicker-toggle matSuffix [for]="datamat">
                                   </mat-datepicker-toggle>
                                   <mat-datepicker #datamat></mat-datepicker>
                               </mat-form-field>
                     </div>
                     <div class="contacto">                            
                      <mat-form-field   appearance="outline" class="example-full-width">
                        <mat-label>Centro de Custo</mat-label>
                        <input matInput type="text" formControlName="ccusto" [readonly]="true">
                      </mat-form-field>
                      <mat-form-field  appearance="outline" class="example-full-width">
                        <mat-label>Morada</mat-label>
                        <input matInput type="text" formControlName="morada" [readonly]="true">
                      </mat-form-field>
                    
                     </div>
                    <div class="contacto">  
                      <mat-form-field   appearance="outline" class="example-full-width">
                      <mat-label>Localidade</mat-label>
                      <input matInput type="text" formControlName="localidade" [readonly]="true">
                    </mat-form-field>
                    
                    <mat-form-field   appearance="outline" class="example-full-width">
                      <mat-label>NUIT</mat-label>
                      <input matInput type="number" formControlName="nuit" [readonly]="true">
                    </mat-form-field></div>
              </mat-card-content>
            </mat-card>
          
          
          
    
          

                    
                 
      
                      <mat-card class="cardsDialog" style="margin-top: 2rem;">
                        <mat-card-content>
                          <mat-tab-group>
                            <mat-tab label="Documentos"> 
                             
                            <mat-card  style="margin-top: 2rem;width: 100%;">
                              
                          
                                 <mat-card-content >   
                                        
            
<div class="position">
  <div class="btnPrint" style="width: 15%; margin-bottom: 1rem; ">
    <button (click)="Getturmas()" type="button">
      <mat-icon style="color: rgb(20, 116, 68);">refresh</mat-icon>
      <span>Dados</span>  
      </button>
   </div>
            
</div>
                            
                            <div class="mat-elevation-z2">     
                              <div class="body table-responsive">                                               
                                 <table mat-table [dataSource]="dataListaturma">          
                                  <ng-container matColumnDef="nrdoc">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Número </th>
                                    <td mat-cell *matCellDef="let element"> {{element.nrdoc}}</td>
                                    <td mat-footer-cell *matFooterCellDef>  </td>
                                  </ng-container>
  
                                  <ng-container matColumnDef="descricao">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Documento </th>
                                    <td mat-cell *matCellDef="let element"> {{element.descricao
                                    }} </td>
                                    <td mat-footer-cell *matFooterCellDef>  </td>
                                  </ng-container>  
                                  <ng-container matColumnDef="data">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Data </th>
                                    <td mat-cell *matCellDef="let element"> {{element.data 
                                     | date:'dd-MM-yyyy'}} </td>
                                    <td mat-footer-cell *matFooterCellDef >Totais: </td>
                                  </ng-container>
                                  <ng-container matColumnDef="valordoc">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Valor doc.  </th>
                                    <td mat-cell *matCellDef="let element"> {{element.valordoc}} </td>
                                    <td mat-footer-cell *matFooterCellDef> {{calculationtotaldoc() }}  {{moeda}}  </td>
                                  </ng-container>
                                  <ng-container matColumnDef="valorpreg">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Por Pagar </th>
                                    <td mat-cell *matCellDef="let element"> {{element.valorpreg}} </td>
                                    <td mat-footer-cell *matFooterCellDef> {{calculationtotalpreg() }}  {{moeda}}  </td>
                                  </ng-container>
  
                                  <ng-container matColumnDef="valorreg">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pago </th>
                                    <td mat-cell *matCellDef="let element"> {{element.valorreg}} </td>
                                    <td mat-footer-cell *matFooterCellDef>{{calculationtotalpago()}} {{moeda}}</td>
                     
                                  </ng-container>
  
                                  <ng-container matColumnDef="desconto">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Desconto </th>
                                    <td mat-cell *matCellDef="let element"> {{element.descontofin}} </td>
                                    <td mat-footer-cell *matFooterCellDef>  {{calculationtotaldesc() }}  {{moeda}} </td>
                     
                                  </ng-container>
  
                                  <ng-container matColumnDef="valorpend">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);"> Pendente </th>
                                    <td mat-cell *matCellDef="let element"> {{element.valorPend}} </td>
                                    <td mat-footer-cell *matFooterCellDef>  {{calculationtotalpendente() }}  {{moeda}} </td>
                     
                                  </ng-container>
                                  <ng-container matColumnDef="marcar">
                                    <th mat-header-cell *matHeaderCellDef style="background-color: rgb(1, 35, 57);">  <mat-icon>delete_sweep</mat-icon> </th>
                                    <td mat-cell *matCellDef="let i = index">
                                      
                                    
                  <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
                  (click)="removerturmal(i)"  style="cursor: pointer;
                  " > <mat-icon>delete_sweep</mat-icon></button></td>
                       <td mat-footer-cell *matFooterCellDef>  </td>
                                  </ng-container>
  
  
  
  
  
                                   <tr mat-header-row *matHeaderRowDef="colunas"></tr>
                                   <tr mat-row *matRowDef="let row; columns: colunas;"></tr>
                                   
      <tr mat-footer-row *matFooterRowDef="colunas; sticky: true"></tr>
                                 </table>                          
                                 <mat-paginator 
                                 [length]="totalrecordturma"
                                 [pageSize]="5"
                                 [pageSizeOptions]="[5, 8, 10,20, 50]" 
                                  showFirstLastButtons> </mat-paginator>

                                  </div>
                               </div> 
                         
                                       
                                     
                                        
                                 </mat-card-content>
                               </mat-card>
                          
                          
                            </mat-tab>
                            
                           
    <mat-tab label="Outros dados">    
      
     <mat-tab-group>
      <mat-tab label="Regularizações">
      
      
      <div formArrayName="formasp" class="agrega">
        
        <div *ngIf="visibilidadeagregado; else loggedOut">
          <table>
            <thead>
              <tr>
                <th>Tipo Movimento</th>
                <th>Nº de cheque</th>
                <th>Conta</th>
                <th>Data</th>
                <th>Valor</th>
                <th>
                     <button type="button" 
                    style="background-color: rgb(2, 43, 72); color: white;" (click)="adicionarFp()">
                    <mat-icon>plus_one</mat-icon>
                </button> 
                
                  </th>
                  
              </tr>
            </thead>
      
      
            <tbody *ngFor="let item of itemsFp.controls; let i = index" [formGroupName]="i">      
              <tr>                   
                <td>
                  <mat-form-field  appearance="outline" class="example-full-width"> 
                    <mat-label>Tipo de Movimento</mat-label>       
                    <input type="text" matInput 
                    formControlName="titulo"
                    [matAutocomplete]="autobi"  [formControl]="myControlturno">
                   <mat-autocomplete #autobi="matAutocomplete"
                   >
                       <mat-option (click)="onSelectbi(item,i)" *ngFor="let item of filteredOptionsturno | 
                       async; let index = index" [value]="item.descricao">
                           {{ item.descricao | titlecase}}
                         </mat-option>
                   </mat-autocomplete>
                </mat-form-field>
                  
                </td>   
                <td >     
                  <mat-form-field  appearance="outline" class="example-full-width">
                    <mat-label>Nº de cheque</mat-label>
                         <input matInput type="text" formControlName="numtitulo">
                       </mat-form-field>
                     </td>   
                     
                     <td>
                      <mat-form-field  appearance="outline" class="example-full-width">   
                        <mat-label>Conta</mat-label>
                        <input type="text" matInput 
                        formControlName="contatesoura" 
                        [matAutocomplete]="autobissssssssss">
                       <mat-autocomplete #autobissssssssss="matAutocomplete"
                       >
                           <mat-option (click)="onSetEtapaSemestre(item,i)" *ngFor="let item of 
                           filteredOptionsEtapaSemestre | 
                           async; let index = index" [value]="item.contas">
                               {{ item.contas | titlecase}}
                             </mat-option>
                       </mat-autocomplete>
                    </mat-form-field>
                    </td>                        
                    <td>
                      <mat-form-field  appearance="outline" class="example-full-width">
                        <mat-label>Data</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="dcheque">                                
                        <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                      </mat-form-field>
                    </td>    
                  <td>                        
                    <mat-form-field  appearance="outline" class="example-full-width">
                      <mat-label>Valor</mat-label>
                      <input matInput type="number"  formControlName="valor">
                    </mat-form-field>
                  </td>
                <td> 
  
                  <button type="button" mat-mini-fab color="warn" fxFlex="nogrow"
                  (click)="removerFormasp(i)"  style="cursor: pointer;
                  " > <mat-icon>delete_sweep</mat-icon></button>
                </td>   
                
              </tr>
            </tbody>
          </table>
      
        </div>
        
        <ng-template #loggedOut>
          <div style="display: flex;justify-content: end;">
            <button type="button" mat-mini-fab (click)="adicionarFp()"
            style="background-color: rgb(2, 43, 72); color: white;">
            <mat-icon>plus_one</mat-icon>
        </button>
          </div>
        </ng-template>
      </div>
    
    
      </mat-tab>
      <mat-tab label="Outros dados">
        
       <div class="contacto">                            
        <mat-form-field  appearance="outline" class="example-full-width">
          <mat-label>Curso</mat-label>
          <input matInput type="text" formControlName="desccurso" [readonly]="true">
        </mat-form-field>
                             
             <mat-form-field  appearance="outline" class="example-full-width">
               <mat-label>Nível académico</mat-label>
               <input matInput type="text" formControlName="nivelac" [readonly]="true">
             </mat-form-field>
             <mat-form-field  appearance="outline" class="example-full-width">
               <mat-label>Ano/Semstre turma</mat-label>
               <input matInput type="text" formControlName="anosem" [readonly]="true">
             </mat-form-field>
             

       

        
</div>
      </mat-tab>
     </mat-tab-group>
  
  
      </mat-tab>
                          </mat-tab-group>
                        </mat-card-content>
                      </mat-card>
                          

      
          <div  style="display: flex; width: 100%; justify-content: center; margin-top: 1rem;">
            

              </div>
      
    </form>

    <div  class="spinner-wrapper" *ngIf="isSpinnerDisplayed">
      <mat-spinner></mat-spinner>
    </div> 







 -->
